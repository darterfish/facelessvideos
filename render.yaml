services:
  - type: redis
    name: facelessvideos-redis
    plan: free
    ipAllowList:
      - source: 0.0.0.0/0
        description: allow all (for internal use)

  - type: web
    name: facelessvideos
    env: docker
    branch: clean-main
    plan: free
    envVars:
      - key: REDIS_URL
        fromService:
          name: facelessvideos-redis
          type: redis
          property: connectionString

  - type: worker
    name: facelessvideos-worker
    env: python
    branch: clean-main
    startCommand: python worker.py
    plan: free
    envVars:
      - key: REDIS_URL
        fromService:
          name: facelessvideos-redis
          type: redis
          property: connectionString
